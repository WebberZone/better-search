function bsearchCopyToClipboard(a){const e=document.getElementById(a);if(!e)return;const t=e.parentElement.querySelector(".bsearch-copy-button");t&&navigator.clipboard.writeText(e.textContent).then((()=>{const a=t.querySelector(".dashicons");a.classList.remove("dashicons-clipboard"),a.classList.add("dashicons-yes"),t.classList.add("copied"),t.title=better_search_admin.copied,setTimeout((()=>{a.classList.remove("dashicons-yes"),a.classList.add("dashicons-clipboard"),t.classList.remove("copied"),t.title=better_search_admin.copyToClipboard}),2e3)})).catch((()=>{const a=t.querySelector(".dashicons");a.classList.remove("dashicons-clipboard"),a.classList.add("dashicons-warning"),t.classList.add("error"),t.title=better_search_admin.copyError,setTimeout((()=>{a.classList.remove("dashicons-warning"),a.classList.add("dashicons-clipboard"),t.classList.remove("error"),t.title=better_search_admin.copyToClipboard}),2e3)}))}function bsearchAddCopyButton(a){const e=document.getElementById(a);if(!e)return;const t=document.createElement("button");t.type="button",t.className="bsearch-copy-button",t.setAttribute("aria-label",better_search_admin.copyToClipboard),t.title=better_search_admin.copyToClipboard,t.onclick=()=>bsearchCopyToClipboard(a);const n=document.createElement("span");n.className="screen-reader-text",n.textContent=better_search_admin.copyToClipboard;const c=document.createElement("span");c.className="dashicons dashicons-clipboard",c.setAttribute("aria-hidden","true"),t.appendChild(n),t.appendChild(c);const i=e.parentElement;i&&i.classList.contains("bsearch-code-wrapper")&&i.appendChild(t)}jQuery(document).ready((function(a){a('button[name="bsearch_cache_clear"]').on("click",(function(){if(confirm(bsearch_admin_data.confirm_message)){var e=a(this);e.prop("disabled",!0).append(' <span class="spinner is-active"></span>'),function(e){a.post(bsearch_admin_data.ajax_url,{action:"bsearch_clear_cache",security:bsearch_admin_data.security},(function(a){a.success?alert(a.data.message):alert(bsearch_admin_data.fail_message)})).fail((function(a,e){alert(bsearch_admin_data.request_fail_message+e)})).always((function(){e.prop("disabled",!1).find(".spinner").remove()}))}(e)}}));var e=0;function t(){e=0}a("form *").change((function(){e=1})),a(document).on("click",".bsearch-run-collation-fix",(function(e){if(e.preventDefault(),window.confirm("Are you sure? Please backup your database before proceeding!")){var t=a(this),n=t.text();t.prop("disabled",!0).text("Running...").append(' <span class="spinner is-active" style="float: none; margin: 0 0 0 5px;"></span>'),a.post(bsearch_admin_data.ajax_url,{action:"bsearch_run_collation_fix",blog_id:t.data("blog-id"),collation:t.data("collation"),security:bsearch_admin_data.security},(function(a){a.success?(alert(a.data||"Collation updated successfully."),t.text("Fixed!").removeClass("button-danger").addClass("button-secondary")):alert(a.data||"Failed to update collation.")})).fail((function(a,e){alert("Request failed: "+e)})).always((function(){t.find(".spinner").remove(),"Fixed!"!==t.text()&&t.prop("disabled",!1).text(n)}))}})),window.onbeforeunload=function(){if(1==e)return!0},a("input[name='submit']").click(t),a("input[id='search-submit']").click(t),a("input[id='doaction']").click(t),a("input[id='doaction2']").click(t),a("input[name='filter_action']").click(t),a((function(){a("#post-body-content").tabs({create:function(e,t){a(t.tab.find("a")).addClass("nav-tab-active")},activate:function(e,t){a(t.oldTab.find("a")).removeClass("nav-tab-active"),a(t.newTab.find("a")).addClass("nav-tab-active")}})})),a((function(){var e="dd M yy",t=a("#datepicker-from").datepicker({changeMonth:!0,changeYear:!0,maxDate:0,dateFormat:e}).on("change",(function(){n.datepicker("option","minDate",c(this))})),n=a("#datepicker-to").datepicker({changeMonth:!0,changeYear:!0,maxDate:0,dateFormat:e}).on("change",(function(){t.datepicker("option","maxDate",c(this))}));function c(t){var n;try{n=a.datepicker.parseDate(e,t.value)}catch(a){n=null}return n}}))}));